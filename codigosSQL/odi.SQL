--1 CREAR USUARIO PARA REPOSITORIO MAESTRO
CREATE USER C##MASTER IDENTIFIED BY 123456
DEFAULT TABLESPACE USERS TEMPORARY TABLESPACE TEMP;

--2. DAR PERMISOS DE CONECCION Y GESTION
GRANT CONNECT, RESOURCE TO C##MASTER;

--3. DAR PERMISOS MAS EXPECIFICOS SOBRE TODAS LAS TABLAS AL TIEMPO
BEGIN
    FOR t IN (SELECT table_name FROM all_tables WHERE owner = 'SYSTEM') LOOP
        EXECUTE IMMEDIATE 'GRANT SELECT, INSERT, UPDATE, DELETE ON SYSTEM.' || t.table_name || ' TO C##MASTER';
    END LOOP;
END;

--1 CREAR USUARIO PARA REPOSITORIO DE TRABAJO
CREATE USER C##WORKER IDENTIFIED BY 123456
DEFAULT TABLESPACE USERS TEMPORARY TABLESPACE TEMP;

--2. DAR PERMISOS DE CONECCION Y GESTION
GRANT CONNECT, RESOURCE TO C##WORKER;

--3. DAR PERMISOS MAS EXPECIFICOS SOBRE TODAS LAS TABLAS AL TIEMPO
BEGIN
    FOR t IN (SELECT table_name FROM all_tables WHERE owner = 'SYSTEM') LOOP
        EXECUTE IMMEDIATE 'GRANT SELECT, INSERT, UPDATE, DELETE ON SYSTEM.' || t.table_name || ' TO C##WORKER';
    END LOOP;
END;

--permisos de administrador para el usuario
GRANT DBA TO C##MASTER;
REVOKE DBA FROM C##MASTER;

--VER PERMISOS SOBRE LAS TABLAS
SELECT * 
FROM DBA_TAB_PRIVS 
WHERE GRANTEE = 'C##WORKER';

--DARLE ESPACIO EN EL TABLESPACE A UN USUARIO
ALTER USER nombre_usuario QUOTA UNLIMITED ON nombre_tablespace;
